<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title>Login Page</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link href="../fb-login.css" rel="stylesheet">
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>  
        <!--        <script src="fb-login.js"></script>-->
    </head>
    <body>
        <button id="big-fb-login" class="btn-facebook btn big-fb-btn">Login dengan Facebook</button>
        <script>
            $(function() {
                $("#big-fb-login").bind("click", function() {
                    var id = this.id;
                    if ($("#fxLoader").size() >= 0) {
                        $("#fxLoader").remove();
                        createLoaderLayer("Login dengan akun Facebook.")
                    }
                    loader();
                    $("#boxLoader").css("width", "400px");
                    $("#fxLoader").css("background-color", "rgba(0,0,0,0.7)");
                    var w = 790;
                    var h = 360;
                    var url = './redirect.php';
                    var title = 'Twitter';
                    var left = (screen.width/2)-(w/2);
                    var top = (screen.height/2)-(h/2);
                    var win = window.open(url, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
                    var timer = setInterval(function() {   
                        if(win.closed) {  
                            clearInterval(timer);  
                            loaded();
                        }  
                    }, 1000);
                                        
                    return true
                });
            });
            
            function handleSessionResponse(response) {
                if (response.status === 'connected') {
                    // connected
                    console.log('connected');
                    if (response.authResponse.userID) {
                        console.log(response.authResponse.userID);
                        loaded();
                    }else{
                        console.log(response.authResponse.userID);
                        loaded();
                    }
                } else if (response.status === 'not_authorized') {
                    // not_authorized
                    console.log('not_authorized');
                    loaded();
                } else {
                    // not_logged_in
                    console.log('not_logged_in');
                    loaded();
                }
            }
            function createLoaderLayer(customMessage) {
                var message = (typeof customMessage == "undefined") ? "menyimpan": customMessage;
                $("body").append('<div id="fxLoader" align="center" style="display:none;"><div id="boxLoader"><table><tr><td width="24"></td><td style="padding: 3px 0 0 10px;">' + message + "</td></tr></table></div></div>")
            }
            function loader() {
                $("#fxLoader").css({
                    position: "fixed",
                    top: 0,
                    width: "100%",
                    height: "100%"
                });
                $("#boxLoader").css({
                    padding: "4px 0",
                    width: "200px",
                    color: "#FFFFFF",
                    "font-weight": "bold"
                }).addClass("ui-corner-bl").addClass("ui-corner-br");
                $("#fxLoader").show()
            }
            function loaded() {
                $("#fxLoader").fadeOut()
            } 
        </script>
    </body>
</html>